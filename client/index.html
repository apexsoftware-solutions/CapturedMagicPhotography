<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <title>Captured Magic Photography - Family Photographer</title>
    <meta name="description" content="Professional family photography services by Captured Magic Photography. Preserving life's most precious moments with timeless elegance and artistic vision in Fredericksburg, VA and beyond.">
    <meta property="og:title" content="Captured Magic Photography - Family Photographer">
    <meta property="og:description" content="Professional family photography services. Capturing precious family moments with artistic vision and genuine emotion.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="/attached_assets/og-preview-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Beautiful family photography by Captured Magic Photography">
    <meta property="og:site_name" content="Captured Magic Photography">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/attached_assets/og-preview-image.jpg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&family=Great+Vibes&family=Playfair+Display:wght@400;500;600;700&family=Lato:wght@300;400;500;700&family=Allura&family=Alex+Brush&family=Herr+Von+Muellerhoff&family=Pinyon+Script&family=Allison&display=swap" rel="stylesheet">
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <!-- This is a replit script which adds a banner on the top of the page when opened in development mode outside the replit environment -->
    <script type="text/javascript" src="https://replit.com/public/js/replit-dev-banner.js"></script>

    <!-- START EMAIL DEBUG SNIPPET - REMOVE AFTER DEBUG -->
    <div id="email-debug" style="position:fixed;right:10px;bottom:10px;z-index:9999;
      background:#fff;border:2px solid #333;padding:12px;max-width:360px;font-family:Arial;font-size:13px;">
      <strong>Email debug info</strong>
      <div id="email-debug-content" style="margin-top:8px;white-space:pre-wrap;"></div>
      <button id="email-debug-clear" style="margin-top:8px;">Clear</button>
      <div style="margin-top:8px;color:#666;font-size:11px;">(Remove this snippet after debugging)</div>
    </div>

    <script>
    (function(){
      const out = msg => {
        const el = document.getElementById('email-debug-content');
        el.textContent = (el.textContent ? el.textContent + "\n\n" : "") + msg;
      };

      // Basic checks for common patterns
      out('Page URL: ' + location.href);
      out('User agent: ' + navigator.userAgent);

      // Check EmailJS client-side SDK presence
      out('window.emailjs exists: ' + (typeof window.emailjs !== 'undefined'));
      if (window.emailjs) {
        out('emailjs.sendForm exists: ' + (typeof emailjs.sendForm === 'function'));
        out('emailjs.init exists: ' + (typeof emailjs.init === 'function'));
      }

      // Check for common variable names that people try to use
      const vars = [
        'EMAILJS_PUBLIC_KEY','EMAILJS_SERVICE_ID','EMAILJS_TEMPLATE_ID',
        'EMAILJS_USER','EMAILJS_SERVICE','EMAILJS_TEMPLATE'
      ];
      vars.forEach(k => out(k + ' on window: ' + (typeof window[k] !== 'undefined' ? String(window[k]) : 'MISSING')));

      // If your client-side JS puts config into a global object named `emailConfig` check that
      out('window.emailConfig present: ' + (typeof window.emailConfig !== 'undefined'));
      if (window.emailConfig) out('emailConfig: ' + JSON.stringify(window.emailConfig));

      // Intercept form submit (if your form has id="contact" or name="contact")
      const f = document.querySelector('form#contact, form[name="contact"], form[action*="send-inquiry"], form');
      if (!f) {
        out('Form element NOT found with selectors: form#contact, form[name=\"contact\"], form[action*=\"send-inquiry\"], or first <form>');
      } else {
        out('Form element FOUND. Will attach debug submit listener to it.');
        f.addEventListener('submit', function(ev){
          try {
            ev.preventDefault();
            out('--- Form submit intercepted ---');

            // Show form field names and values (mask anything that looks like a key)
            const data = {};
            new FormData(f).forEach((v,k) => {
              const masked = /key|token|secret|password|user_id|public/i.test(k) ? '***masked***' : v;
              data[k] = masked;
            });
            out('Form fields: ' + JSON.stringify(data, null, 2));

            // If emailjs is available, attempt a sendForm to see response (this may actually attempt to send)
            if (window.emailjs && typeof emailjs.sendForm === 'function') {
              out('Calling emailjs.sendForm(...) to test — this will attempt to send if config exists.');
              emailjs.sendForm(window.EMAILJS_SERVICE_ID || window.EMAILJS_SERVICE || 'service_xxx',
                                window.EMAILJS_TEMPLATE_ID || window.EMAILJS_TEMPLATE || 'template_xxx',
                                f)
                .then(function(resp){
                  out('emailjs.sendForm SUCCESS: ' + JSON.stringify(resp));
                }, function(err){
                  out('emailjs.sendForm ERROR: ' + (err && err.text ? err.text : JSON.stringify(err)));
                });
            } else {
              out('emailjs.sendForm not available — cannot call EmailJS from client.');
            }
          } catch(e){
            out('Exception in debug submit handler: ' + String(e));
          }
        }, {once:false});
      }

      // Clear button
      document.getElementById('email-debug-clear').addEventListener('click', function(){ document.getElementById('email-debug-content').textContent='';});
    })();
    </script>
    <!-- END EMAIL DEBUG SNIPPET -->
  </body>
</html>
